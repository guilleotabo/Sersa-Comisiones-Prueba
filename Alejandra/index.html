<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Bonos Comerciales - SERSA SAECA</title>
    
<link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="bonos.css">
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="login-screen" class="login-overlay">
        <div class="login-container">
            <div class="login-header">
                <div class="login-icon">üîê</div>
                <h2>Acceso al Sistema</h2>
                <p>Sistema de Bonos Comerciales</p>
            </div>
            <div class="login-form">
                <div class="input-group-login">
                    <input type="password" id="password-input" class="login-input" placeholder="Contrase√±a" maxlength="20">
                    <button type="button" class="login-btn" onclick="verificarContrasena()">
                        <span class="btn-text">Ingresar</span>
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
                <div id="login-error" class="login-error"></div>
            </div>
            <div class="login-footer">
                <small>Ingresa la contrase√±a para acceder al sistema</small>
            </div>
        </div>
    </div>

    <div class="container" id="main-app">
        <!-- Panel Izquierdo -->
        <div class="left-panel">
            <div class="header">
                <h1>üí∞ Sistema de Bonos Comerciales</h1>
                <span id="saveIndicator"></span>
                <div class="header-buttons">
                    <button class="header-btn" onclick="limpiarTodo()">üóëÔ∏è Limpiar</button>
                    <button class="header-btn" onclick="descargarPDF()">üìä Reporte</button>
                    <button class="header-btn" onclick="toggleAdminPanel()">‚öôÔ∏è Admin</button>
                    <button class="header-btn" id="toggleSidebarBtn" onclick="toggleSidebar()">‚¨ÖÔ∏è Ocultar</button>
                </div>
            </div>
            
            <div class="input-section">
                <!-- Historial -->
                <div class="section-divider">‚ïê‚ïê‚ïê HISTORIAL ‚ïê‚ïê‚ïê</div>
                
                <div class="input-group">
                    <label>Nivel mes anterior</label>
                    <select class="input-field" id="nivelAnterior" onchange="updateCalculations()">
                        <option value="0">Capilla</option>
                        <option value="1">Junior</option>
                        <option value="2" selected>Senior A</option>
                        <option value="3">Senior B</option>
                        <option value="4">M√°ster</option>
                        <option value="5">Genio</option>
                    </select>
                    <div class="help-text">Tu nivel de carrera del mes anterior (calculado por ti)</div>
                </div>
                
                <!-- Volumen -->
                <div class="section-divider">‚ïê‚ïê‚ïê VOLUMEN ‚ïê‚ïê‚ïê</div>
                
                <div class="input-group">
                    <label>Monto Interno <span class="req">*</span></label>
                    <input type="text" class="input-field required" id="montoInterno" 
                           placeholder="Ej: 950.000.000" 
                           onkeyup="formatAndCalculate(this)"
                           onfocus="removeFormat(this)"
                           onblur="applyFormat(this)">
                    <div class="status-text">
                        <span id="internoStatus"></span>
                        <span id="montoLlave" class="llave"></span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Monto Externo/Referenciado</label>
                    <input type="text" class="input-field" id="montoExterno"
                           placeholder="Ej: 80.000.000"
                           onkeyup="formatAndCalculate(this)"
                           onfocus="removeFormat(this)"
                           onblur="applyFormat(this)">
                    <div class="status-text">
                        <span id="externoLlave" class="llave"></span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Recuperados +3 meses</label>
                    <input type="text" class="input-field" id="montoRecuperado"
                           placeholder="Ej: 60.000.000"
                           onkeyup="formatAndCalculate(this)"
                           onfocus="removeFormat(this)"
                           onblur="applyFormat(this)">
                    <div class="status-text">
                        <span id="recuperadoLlave" class="llave"></span>
                    </div>
                    <div class="help-text">Clientes recuperados despu√©s de 3 meses</div>
                </div>
                
                <div class="input-group">
                    <label>Cantidad Desembolsos <span class="req">*</span></label>
                    <input type="text" class="input-field required" id="cantidadDesembolsos" 
                           placeholder="Ej: 10"
                           onkeyup="formatAndCalculate(this)">
                    <div class="status-text">
                        <span id="cantidadStatus"></span>
                    </div>
                </div>
                
                <!-- Llave Semanal -->
                <div class="section-divider">‚ïê‚ïê‚ïê LLAVE SEMANAL ‚ïê‚ïê‚ïê</div>
                
                <div class="input-group">
                    <label>Desembolsos semanales m√≠nimos <span class="req">*</span> <span class="tooltip" data-tip="Cantidad de desembolsos en tu peor semana">‚ìò</span></label>
                    <input type="text" class="input-field required filled" id="menorSemana" value="2"
                           placeholder="Ej: 2"
                           onkeyup="formatAndCalculate(this)">
                    <div class="llave-info" id="llaveInfo">
                        <div><strong>LLAVE HABILITADA:</strong></div>
                        <div class="llave-rules">
                                            <div>‚úÖ 2/sem ‚Üí habilita bono cantidad completo</div>
                <div>‚ùå Menos de 2/sem ‚Üí sin bono cantidad</div>
                        </div>
                    </div>
                </div>
                
                <!-- Calidad -->
                <div class="section-divider">‚ïê‚ïê‚ïê CALIDAD ‚ïê‚ïê‚ïê</div>
                
                <div class="input-group">
                    <label>Conversi√≥n % <span class="req">*</span></label>
                    <input type="text" class="input-field required" id="conversion"
                           placeholder="Ej: 7" maxlength="5" value="8"
                           onkeyup="formatAndCalculate(this)">
                </div>
                
                <div class="input-group">
                    <label>Empat√≠a/Mystery % <span class="req">*</span></label>
                    <input type="text" class="input-field required" id="empatia"
                           placeholder="Ej: 92" maxlength="3" value="96"
                           onkeyup="formatAndCalculate(this)">
                </div>
                
                <div class="input-group">
                    <label>Proceso/CRM % <span class="req">*</span></label>
                    <input type="text" class="input-field required" id="proceso"
                           placeholder="Ej: 85" maxlength="3" value="95"
                           onkeyup="formatAndCalculate(this)">
                </div>

                <div class="input-group">
                    <label>Mora % <span class="req">*</span></label>
                    <input type="text" class="input-field required" id="mora"
                           placeholder="Ej: 2" maxlength="3" value="2"
                           onkeyup="formatAndCalculate(this)">
                </div>
                
                <!-- Otros -->
                <div class="section-divider">‚ïê‚ïê‚ïê OTROS ‚ïê‚ïê‚ïê</div>
                
                <div class="input-group">
                    <label>Menor nivel del equipo</label>
                    <select class="input-field" id="nivelEquipo" onchange="updateCalculations()">
                        <option value="0">Capilla</option>
                        <option value="1">Junior</option>
                        <option value="2" selected>Senior A</option>
                        <option value="3">Senior B</option>
                        <option value="4">M√°ster</option>
                        <option value="5">Genio</option>
                    </select>
                    <div class="help-text">Para bono equipo (desde Senior A)</div>
                </div>
            </div>
        </div>

        <!-- Bot√≥n para abrir sidebar -->
        <button id="openSidebarBtn" class="open-sidebar-btn" onclick="toggleSidebar()">‚û°Ô∏è Mostrar</button>

        <!-- Panel Derecho -->
        <div class="right-panel">
            <div class="top-stats">
                <div class="stat">
                    <span class="stat-label">Tu Nivel:</span>
                    <span class="stat-value" id="statNivel">Senior A</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Subtotal:</span>
                    <span class="stat-value" id="statSubtotal">0 Gs</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Multiplicador:</span>
                    <span class="stat-value" id="statMulti">0%</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Bono:</span>
                    <span class="stat-value" style="color: #2E7D32;" id="statComision">0 Gs</span>
                </div>
            </div>
            
            <div class="results-container">
                <!-- Fila 1: Monto Interno y Externo -->
                <div class="card">
                    <div class="card-title">üìä MONTO INTERNO - Meta desembolso | Bono</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="barraInterno"></div>
                    </div>
                    <div class="progress-info" id="infoInterno"></div>
                </div>
                
                <div class="card">
                    <div class="card-title">üíé MONTO EXTERNO/REFERENCIADO - Meta | Bono</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="barraExterno"></div>
                    </div>
                    <div class="progress-info" id="infoExterno"></div>
                </div>
                
                <!-- Fila 2: Cantidad y Recuperados -->
                <div class="card">
                    <div class="card-title">üéØ CANTIDAD DESEMBOLSOS - Meta | Bono | Llave</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="barraCantidad"></div>
                    </div>
                    <div class="progress-info" id="infoCantidad"></div>
                </div>
                
                <div class="card">
                    <div class="card-title">üîÑ RECUPERADOS +3 MESES - Meta | Bono</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="barraRecuperado"></div>
                    </div>
                    <div class="progress-info" id="infoRecuperado"></div>
                </div>
                
                <!-- Fila 3: Carrera y Equipo -->
                <div class="card">
                    <div class="card-title">üìà BONO CARRERA - Seg√∫n menor nivel entre mes actual y anterior</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="barraCarrera"></div>
                    </div>
                    <div class="progress-info" id="infoCarrera"></div>
                </div>
                
                <div class="card">
                    <div class="card-title">üë• BONO EQUIPO - Seg√∫n menor nivel del equipo</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="barraEquipo"></div>
                    </div>
                    <div class="progress-info" id="infoEquipo"></div>
                    <div id="equipoRequisitos" style="margin-top: 8px; padding: 8px; background: #FFF3E0; border-radius: 4px; font-size: 11px; color: #E65100;">
                        ‚ö†Ô∏è Necesitas estar en Senior A+ para cobrar bono equipo
                    </div>
                </div>
                
                <!-- Barra de Subtotal -->
                <div class="card full-width">
                    <div class="card-title">üí∞ SUBTOTAL ACUMULADO (sin multiplicadores)</div>
                    <div class="subtotal-bar">
                        <div class="subtotal-fill" id="subtotalFill"></div>
                    </div>
                    <div class="subtotal-text">
                        Subtotal: <strong id="subtotalMonto">0 Gs</strong> de <strong>14.000.000 Gs</strong>
                    </div>
                </div>
                
                <!-- Multiplicadores -->
                <div class="card full-width">
                    <div class="card-title">‚≠ê MULTIPLICADORES (SE APLICAN EN CADENA)</div>
                    <div class="multiplier-tables" id="multiplicadorTables"></div>
                    <div class="multiplier-calc" id="multiplicadorCalc">
                        C√°lculo: - √ó - √ó - = 0%
                    </div>
                </div>
                
                <!-- C√°lculo de Comisi√≥n y Sugerencias lado a lado -->
                <div class="card full-width">
                    <div class="card-title">üí∞ C√ÅLCULO DE BONOS Y SUGERENCIAS</div>
                    <div class="commission-calculation">
                        <div class="calc-section">
                            <div class="calc-row">
                                <span>Base fija:</span>
                                <span id="calcBase">0 Gs</span>
                            </div>
                            <div class="calc-row">
                                <span>Carrera:</span>
                                <span id="calcCarrera">0 Gs</span>
                            </div>
                            <div class="calc-row">
                                <span>Monto Interno:</span>
                                <span id="calcInterno">0 Gs</span>
                            </div>
                            <div class="calc-row">
                                <span>Monto Ext/Ref:</span>
                                <span id="calcExterno">0 Gs</span>
                            </div>
                            <div class="calc-row">
                                <span>Recuperados:</span>
                                <span id="calcRecuperado">0 Gs</span>
                            </div>
                            <div class="calc-row">
                                <span>Cantidad <span id="cantidadLlaveInfo"></span>:</span>
                                <span id="calcCantidad">0 Gs</span>
                            </div>
                            <div class="calc-row">
                                <span>Equipo:</span>
                                <span id="calcEquipo">0 Gs</span>
                            </div>
                            <div class="calc-divider"></div>
                            
                            <div class="calc-row">
                                <span>Subtotal:</span>
                                <span id="calcSubtotal">0 Gs</span>
                            </div>
                            <div class="calc-row">
                                <span>√ó Multi:</span>
                                <span id="calcMultiplicador">0%</span>
                            </div>
                            
                            <div class="calc-total">
                                <div class="calc-total-label">TOTAL BONOS</div>
                                <div class="calc-total-value" id="totalComision">0 Gs</div>
                            </div>
                        </div>
                        
                        <div class="suggestions-section">
                            <div class="card-title" style="margin-top: 0;">üí° SUGERENCIAS PERSONALIZADAS</div>
                            <div id="sugerencias"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Informaci√≥n de carrera -->
                <div class="card full-width">
                    <div class="info-section">
                        <h4>üìñ C√ìMO SE DEFINE TU CARRERA</h4>
                        Tu nivel de carrera se determina por el <strong>MENOR</strong> nivel alcanzado entre:
                        <br>‚Ä¢ Monto Interno + Monto Externo + Recuperados + Cantidad Desembolsos
                        <br>‚Ä¢ Se considera el menor entre mes actual y anterior para estabilidad
                        <br>‚Ä¢ NO se consideran: Bono Equipo ni penalizaciones
                    </div>
                    
                    <div class="info-section quick-guide">
                        <h4>üìö GU√çA R√ÅPIDA</h4>
                        ‚Ä¢ <strong>Llaves:</strong> Sin 6 desemb. no hay bono interno | 2/sem habilita bono cantidad
                        <br>‚Ä¢ <strong>Multiplicadores:</strong> Se aplican en cadena (Conv √ó Emp √ó Proc)
                        <br>‚Ä¢ <strong>Base fija:</strong> Siempre 3M, nunca se multiplica
                        <br>‚Ä¢ <strong>Equipo:</strong> Bono seg√∫n menor nivel del equipo (desde Senior A)
                        <br>‚Ä¢ <strong>Meta vs Bono:</strong> Meta = monto a desembolsar | Bono = lo que gan√°s
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel de Administraci√≥n Modal -->
        <div id="adminModal" class="admin-modal">
            <div class="admin-modal-content">
                <div class="admin-modal-header">
                    <h2>‚öôÔ∏è Administraci√≥n del Sistema</h2>
                    <button class="close-admin-btn" onclick="closeAdminPanel()">‚úï</button>
                </div>

                <div class="admin-modal-body">
                    <div class="admin-tabs">
                        <button class="admin-tab-btn active" data-tab="general">General</button>
                        <button class="admin-tab-btn" data-tab="metas">Metas</button>
                        <button class="admin-tab-btn" data-tab="bonos">Bonos</button>
                        <button class="admin-tab-btn" data-tab="multiplicadores">Multiplicadores</button>
                        <button class="admin-tab-btn" data-tab="dashboard">üìä Dashboard Ejecutivo</button>
                    </div>

                    <!-- Contenido de Pesta√±a: General -->
                    <div id="tab-general" class="admin-tab-content active">
                        <!-- Configuraci√≥n General -->
                        <div class="admin-section">
                            <div class="admin-header-config">
                                <div class="admin-system-name">
                                    <h4>Nombre del Sistema</h4>
                                    <table class="admin-table">
                                        <tr>
                                            <th>T√≠tulo Principal</th>
                                            <td><input type="text" id="admin-sistema-nombre" placeholder="üí∞ Sistema de Bonos Comerciales"></td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="admin-base-fixed">
                                    <h4>Base Fija</h4>
                                    <table class="admin-table">
                                        <tr>
                                            <th>Monto Base (Gs.)</th>
                                            <td><input type="text" id="admin-base" onkeyup="formatearAdminInput(this)"></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <h4>Nombres de Niveles</h4>
                            <table class="admin-table">
                                <tr><td>Nivel 1</td><td><input type="text" id="admin-nivel-0" placeholder="Capilla"></td></tr>
                                <tr><td>Nivel 2</td><td><input type="text" id="admin-nivel-1" placeholder="Junior"></td></tr>
                                <tr><td>Nivel 3</td><td><input type="text" id="admin-nivel-2" placeholder="Senior A"></td></tr>
                                <tr><td>Nivel 4</td><td><input type="text" id="admin-nivel-3" placeholder="Senior B"></td></tr>
                                <tr><td>Nivel 5</td><td><input type="text" id="admin-nivel-4" placeholder="M√°ster"></td></tr>
                                <tr><td>Nivel 6</td><td><input type="text" id="admin-nivel-5" placeholder="Genio"></td></tr>
                            </table>
                        </div>
                    </div>

                    <!-- Contenido de Pesta√±a: Metas -->
                    <div id="tab-metas" class="admin-tab-content">
                        <div class="admin-grid">
                            <div>
                                <h4>Monto Interno (Gs)</h4>
                                <table class="admin-table">
                                    <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-meta-interno-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-meta-interno-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-meta-interno-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-meta-interno-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-meta-interno-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-meta-interno-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                            <div>
                                <h4>Monto Externo (Gs)</h4>
                                <table class="admin-table">
                                    <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-meta-externo-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-meta-externo-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-meta-externo-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-meta-externo-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-meta-externo-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-meta-externo-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                            <div>
                                <h4>Recuperados (Gs)</h4>
                                <table class="admin-table">
                                    <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-meta-recuperado-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-meta-recuperado-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-meta-recuperado-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-meta-recuperado-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-meta-recuperado-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                    <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-meta-recuperado-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                            <div>
                                <h4>Cantidad Desembolsos</h4>
                                <table class="admin-table">
                                    <tr><td class="nivel-name-0">Capilla</td><td><input type="number" id="admin-meta-cantidad-0"></td></tr>
                                    <tr><td class="nivel-name-1">Junior</td><td><input type="number" id="admin-meta-cantidad-1"></td></tr>
                                    <tr><td class="nivel-name-2">Senior A</td><td><input type="number" id="admin-meta-cantidad-2"></td></tr>
                                    <tr><td class="nivel-name-3">Senior B</td><td><input type="number" id="admin-meta-cantidad-3"></td></tr>
                                    <tr><td class="nivel-name-4">M√°ster</td><td><input type="number" id="admin-meta-cantidad-4"></td></tr>
                                    <tr><td class="nivel-name-5">Genio</td><td><input type="number" id="admin-meta-cantidad-5"></td></tr>
                                </table>
                            </div>
                        </div>
                    </div>

                                    <!-- Contenido de Pesta√±a: Bonos -->
                <div id="tab-bonos" class="admin-tab-content">
                        <div class="admin-grid">
                            <div>
                                <h4>Bono Carrera (Gs)</h4>
                                <table class="admin-table">
                                                                          <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-bono-carrera-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-bono-carrera-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-bono-carrera-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-bono-carrera-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-bono-carrera-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-bono-carrera-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                            <div>
                                <h4>Bono Interno (Gs)</h4>
                                <table class="admin-table">
                                                                          <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-bono-interno-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-bono-interno-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-bono-interno-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-bono-interno-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-bono-interno-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-bono-interno-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                            <div>
                                <h4>Bono Externo (Gs)</h4>
                                <table class="admin-table">
                                                                          <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-bono-externo-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-bono-externo-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-bono-externo-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-bono-externo-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-bono-externo-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-bono-externo-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                            <div>
                                <h4>Bono Recuperados (Gs)</h4>
                                <table class="admin-table">
                                                                          <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-bono-recuperado-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-bono-recuperado-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-bono-recuperado-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-bono-recuperado-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-bono-recuperado-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-bono-recuperado-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                            <div>
                                <h4>Bono Cantidad (Gs)</h4>
                                <table class="admin-table">
                                                                          <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-bono-cantidad-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-bono-cantidad-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-bono-cantidad-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-bono-cantidad-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-bono-cantidad-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-bono-cantidad-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                            <div>
                                <h4>Bono Equipo (Gs)</h4>
                                <table class="admin-table">
                                                                          <tr><td class="nivel-name-0">Capilla</td><td><input type="text" id="admin-bono-equipo-0" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-1">Junior</td><td><input type="text" id="admin-bono-equipo-1" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-2">Senior A</td><td><input type="text" id="admin-bono-equipo-2" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-3">Senior B</td><td><input type="text" id="admin-bono-equipo-3" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-4">M√°ster</td><td><input type="text" id="admin-bono-equipo-4" onkeyup="formatearAdminInput(this)"></td></tr>
                                      <tr><td class="nivel-name-5">Genio</td><td><input type="text" id="admin-bono-equipo-5" onkeyup="formatearAdminInput(this)"></td></tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Contenido de Pesta√±a: Multiplicadores -->
                    <div id="tab-multiplicadores" class="admin-tab-content">
                        <div class="multiplier-info-banner">
                            <div class="info-icon">üí°</div>
                            <div class="info-content">
                                <strong>¬øC√≥mo funcionan los multiplicadores?</strong>
                                <p>Se aplican en cadena: Conversi√≥n √ó Empat√≠a √ó Proceso √ó Mora. Cada regla se eval√∫a de arriba hacia abajo hasta encontrar una coincidencia.</p>
                            </div>
                        </div>
                        
                        <div class="multiplier-container-v2">
                            <!-- Primera fila: Conversi√≥n y Empat√≠a -->
                            <div class="multiplier-card">
                                <div class="multiplier-card-header">
                                    <div class="multiplier-title">
                                        <span class="multiplier-icon">üìà</span>
                                        <h4>Conversi√≥n</h4>
                                        <span class="multiplier-badge" id="conversion-count">0 reglas</span>
                                    </div>
                                    <button type="button" onclick="addMultiplierRowV2('conversion')" class="add-rule-btn">
                                        <span class="btn-icon">+</span>
                                        <span class="btn-text">Nueva Regla</span>
                                    </button>
                                </div>
                                <div class="multiplier-card-body">
                                    <div id="admin-conversion-table" class="multiplier-rules-container">
                                        <!-- Se genera din√°micamente -->
                                    </div>
                                    <div class="multiplier-empty-state" id="conversion-empty" style="display: none;">
                                        <span class="empty-icon">üìä</span>
                                        <p>No hay reglas configuradas</p>
                                        <small>Agrega tu primera regla de conversi√≥n</small>
                                    </div>
                                </div>
                            </div>

                            <div class="multiplier-card">
                                <div class="multiplier-card-header">
                                    <div class="multiplier-title">
                                        <span class="multiplier-icon">ü§ù</span>
                                        <h4>Empat√≠a</h4>
                                        <span class="multiplier-badge" id="empatia-count">0 reglas</span>
                                    </div>
                                    <button type="button" onclick="addMultiplierRowV2('empatia')" class="add-rule-btn">
                                        <span class="btn-icon">+</span>
                                        <span class="btn-text">Nueva Regla</span>
                                    </button>
                                </div>
                                <div class="multiplier-card-body">
                                    <div id="admin-empatia-table" class="multiplier-rules-container">
                                        <!-- Se genera din√°micamente -->
                                    </div>
                                    <div class="multiplier-empty-state" id="empatia-empty" style="display: none;">
                                        <span class="empty-icon">ü§ù</span>
                                        <p>No hay reglas configuradas</p>
                                        <small>Agrega tu primera regla de empat√≠a</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Segunda fila: Proceso y Mora -->
                            <div class="multiplier-card">
                                <div class="multiplier-card-header">
                                    <div class="multiplier-title">
                                        <span class="multiplier-icon">‚öôÔ∏è</span>
                                        <h4>Proceso</h4>
                                        <span class="multiplier-badge" id="proceso-count">0 reglas</span>
                                    </div>
                                    <button type="button" onclick="addMultiplierRowV2('proceso')" class="add-rule-btn">
                                        <span class="btn-icon">+</span>
                                        <span class="btn-text">Nueva Regla</span>
                                    </button>
                                </div>
                                <div class="multiplier-card-body">
                                    <div id="admin-proceso-table" class="multiplier-rules-container">
                                        <!-- Se genera din√°micamente -->
                                    </div>
                                    <div class="multiplier-empty-state" id="proceso-empty" style="display: none;">
                                        <span class="empty-icon">‚öôÔ∏è</span>
                                        <p>No hay reglas configuradas</p>
                                        <small>Agrega tu primera regla de proceso</small>
                                    </div>
                                </div>
                            </div>

                            <div class="multiplier-card">
                                <div class="multiplier-card-header">
                                    <div class="multiplier-title">
                                        <span class="multiplier-icon">‚è∞</span>
                                        <h4>Mora</h4>
                                        <span class="multiplier-badge" id="mora-count">0 reglas</span>
                                    </div>
                                    <button type="button" onclick="addMultiplierRowV2('mora')" class="add-rule-btn">
                                        <span class="btn-icon">+</span>
                                        <span class="btn-text">Nueva Regla</span>
                                    </button>
                                </div>
                                <div class="multiplier-card-body">
                                    <div id="admin-mora-table" class="multiplier-rules-container">
                                        <!-- Se genera din√°micamente -->
                                    </div>
                                    <div class="multiplier-empty-state" id="mora-empty" style="display: none;">
                                        <span class="empty-icon">‚è∞</span>
                                        <p>No hay reglas configuradas</p>
                                        <small>Agrega tu primera regla de mora</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Vista previa de c√°lculo -->
                        <div class="multiplier-preview">
                            <div class="preview-header">
                                <h4>üî¢ Vista Previa del C√°lculo</h4>
                            </div>
                            <div class="preview-calculation" id="multiplier-calculation-preview">
                                Conversi√≥n (100%) √ó Empat√≠a (100%) √ó Proceso (100%) √ó Mora (100%) = <strong>100%</strong>
                            </div>
                        </div>
                    </div>

                    <!-- Contenido de Pesta√±a: Dashboard Ejecutivo -->
                    <div id="tab-dashboard" class="admin-tab-content">
                        <div class="validation-dashboard">
                            <!-- Header del Dashboard -->
                            <div class="validation-header">
                                <h3>‚öñÔ∏è AN√ÅLISIS DE COHERENCIA DE METAS</h3>
                                <div class="validation-status" id="validation-status">
                                    <span class="status-icon">üîÑ</span>
                                    <span class="status-text">Analizando configuraci√≥n...</span>
                                </div>
                            </div>

                            <!-- Tabla de An√°lisis Principal -->
                            <div class="validation-main">
                                <div class="validation-section">
                                    <h4>üéØ RELACI√ìN META vs BONO (Monto Interno)</h4>
                                    <div class="validation-table-container">
                                        <table class="validation-table" id="validation-table-interno">
                                            <thead>
                                                <tr>
                                                    <th>Nivel</th>
                                                    <th>Meta (Gs)</th>
                                                    <th>Bono (Gs)</th>
                                                    <th>% Rendimiento</th>
                                                </tr>
                                            </thead>
                                            <tbody id="validation-tbody-interno">
                                                <!-- Se genera din√°micamente -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="validation-section">
                                    <h4>üíé RELACI√ìN META vs BONO (Monto Externo)</h4>
                                    <div class="validation-table-container">
                                        <table class="validation-table" id="validation-table-externo">
                                            <thead>
                                                <tr>
                                                    <th>Nivel</th>
                                                    <th>Meta (Gs)</th>
                                                    <th>Bono (Gs)</th>
                                                    <th>% Rendimiento</th>
                                                </tr>
                                            </thead>
                                            <tbody id="validation-tbody-externo">
                                                <!-- Se genera din√°micamente -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="validation-section">
                                    <h4>üéØ RELACI√ìN META vs BONO (Cantidad Desembolsos)</h4>
                                    <div class="validation-table-container">
                                        <table class="validation-table" id="validation-table-cantidad">
                                            <thead>
                                                <tr>
                                                    <th>Nivel</th>
                                                    <th>Meta (Cant.)</th>
                                                    <th>Bono (Gs)</th>
                                                    <th>Bono/Desemb.</th>
                                                </tr>
                                            </thead>
                                            <tbody id="validation-tbody-cantidad">
                                                <!-- Se genera din√°micamente -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Panel de Sugerencias -->
                            <div class="validation-alerts">
                                <div class="validation-section">
                                    <h4>üí° SUGERENCIAS DE MEJORA</h4>
                                    <div id="validation-suggestions-container" class="suggestions-list">
                                        <!-- Se genera din√°micamente -->
                                    </div>
                                </div>
                            </div>

                            <!-- Botones de Acci√≥n -->
                            <div class="validation-actions">
                                <button type="button" onclick="refreshValidation()" class="validation-btn refresh">üîÑ Actualizar An√°lisis</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="admin-modal-footer">
                    <div id="admin-messages" class="admin-messages" style="display: none;"></div>
                    <div class="admin-buttons">
                        <button type="button" onclick="validateAndSaveConfig()" class="admin-btn primary">üíæ Guardar Cambios</button>
                        <button type="button" onclick="exportConfigJS()" class="admin-btn export">üìÑ Exportar config.js</button>
                        <button type="button" onclick="restoreDefaults()" class="admin-btn warning">üîÑ Restaurar Defecto</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Input oculto para importar archivos -->
        <input type="file" id="import-file-input" accept=".json,.js" style="display: none;" onchange="handleFileImport(event)">
    </div>

    
<script src="config.js"></script>
<script src="reports.js"></script>
<script src="app.js"></script>
</body>
</html>
